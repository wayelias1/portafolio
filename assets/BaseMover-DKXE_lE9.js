import{K as M,H as m,W as R,J as l,L as b,a3 as w}from"./index-DkBbFk0F.js";const r=.5,h=0,f=1,F=60,z=0,P=.01;function O(n){const o=n.initialPosition,{dx:s,dy:i}=R(o,n.position),t=Math.abs(s),e=Math.abs(i),{maxDistance:a}=n.retina,y=a.horizontal,v=a.vertical;if(!y&&!v)return;const d=(y&&t>=y)??!1,u=(v&&e>=v)??!1;if((d||u)&&!n.misplaced)n.misplaced=!!y&&t>y||!!v&&e>v,y&&(n.velocity.x=n.velocity.y*r-n.velocity.x),v&&(n.velocity.y=n.velocity.x*r-n.velocity.y);else if((!y||t<y)&&(!v||e<v)&&n.misplaced)n.misplaced=!1;else if(n.misplaced){const x=n.position,c=n.velocity;y&&(x.x<o.x&&c.x<h||x.x>o.x&&c.x>h)&&(c.x*=-l()),v&&(x.y<o.y&&c.y<h||x.y>o.y&&c.y>h)&&(c.y*=-l())}}function T(n,o,s,i,t,e){p(n,e);const a=n.gravity,y=a?.enable&&a.inverse?-f:f;t&&s&&(n.velocity.x+=t*e.factor/(F*s)),a?.enable&&s&&(n.velocity.y+=y*(a.acceleration*e.factor)/(F*s));const v=n.moveDecay;n.velocity.multTo(v);const d=n.velocity.mult(s);a?.enable&&i>h&&(!a.inverse&&d.y>=h&&d.y>=i||a.inverse&&d.y<=h&&d.y<=-i)&&(d.y=y*i,s&&(n.velocity.y=d.y/s));const u=n.options.zIndex,x=(f-n.zIndexFactor)**u.velocityRate;d.multTo(x);const{position:c}=n;c.addTo(d),o.vibrate&&(c.x+=Math.sin(c.x*Math.cos(c.y)),c.y+=Math.cos(c.y*Math.sin(c.x)))}function S(n,o){const s=n.container;if(!n.spin)return;const i={x:n.spin.direction==="clockwise"?Math.cos:Math.sin,y:n.spin.direction==="clockwise"?Math.sin:Math.cos};n.position.x=n.spin.center.x+n.spin.radius*i.x(n.spin.angle),n.position.y=n.spin.center.y+n.spin.radius*i.y(n.spin.angle),n.spin.radius+=n.spin.acceleration;const t=Math.max(s.canvas.size.width,s.canvas.size.height),e=t*r;n.spin.radius>e?(n.spin.radius=e,n.spin.acceleration*=-f):n.spin.radius<z&&(n.spin.radius=z,n.spin.acceleration*=-f),n.spin.angle+=o*P*(f-n.spin.radius/t)}function p(n,o){const s=n.options,i=s.move.path;if(!i.enable)return;if(n.lastPathTime<=n.pathDelay){n.lastPathTime+=o.value;return}const e=n.pathGenerator?.generate(n,o);e&&n.velocity.addTo(e),i.clamp&&(n.velocity.x=b(n.velocity.x,-f,f),n.velocity.y=b(n.velocity.y,-f,f)),n.lastPathTime-=n.pathDelay}function V(n){return n.slow.inRange?n.slow.factor:f}function k(n){const o=n.container,s=n.options,i=s.move.spin;if(!i.enable)return;const t=i.position??{x:50,y:50},e=.01,a={x:t.x*e*o.canvas.size.width,y:t.y*e*o.canvas.size.height},y=n.getPosition(),v=M(y,a),d=m(i.acceleration);n.retina.spinAcceleration=d*o.retina.pixelRatio;const u=0;n.spin={center:a,direction:n.velocity.x>=u?"clockwise":"counter-clockwise",angle:n.velocity.angle,radius:v,acceleration:n.retina.spinAcceleration}}const A=2,E=1,I=1;class H{init(o){const s=o.options,i=s.move.gravity;o.gravity={enable:i.enable,acceleration:m(i.acceleration),inverse:i.inverse},k(o)}isEnabled(o){return!o.destroyed&&o.options.move.enable}move(o,s){const i=o.options,t=i.move;if(!t.enable)return;const e=o.container,a=e.retina.pixelRatio;o.retina.moveSpeed??=m(t.speed)*a,o.retina.moveDrift??=m(o.options.move.drift)*a;const y=V(o),v=o.retina.moveSpeed*e.retina.reduceFactor,d=o.retina.moveDrift,u=w(i.size.value)*a,x=t.size?o.getRadius()/u:E,c=s.factor||I,g=v*x*y*c/A,D=o.retina.maxSpeed??e.retina.maxSpeed;t.spin.enable?S(o,g):T(o,t,g,D,d,s),O(o)}}export{H as BaseMover};
